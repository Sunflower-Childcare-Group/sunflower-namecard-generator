<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Code Test</title>
</head>
<body>
    <h1>QR Code Test</h1>
    <div id="qrcode"></div>
    <canvas id="testCanvas" width="400" height="400" style="border: 1px solid black;"></canvas>

    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js" onload="console.log('QRCode script loaded')" onerror="console.error('QRCode script failed to load')"></script>
    <script>
        // Check if QRCode is available when script starts
        console.log('Script starting, QRCode available:', typeof QRCode !== 'undefined');
        
        // Wait a bit and check again
        setTimeout(() => {
            console.log('After timeout, QRCode available:', typeof QRCode !== 'undefined');
            if (typeof QRCode !== 'undefined') {
                console.log('QRCode object:', QRCode);
            }
        }, 1000);
    </script>
    <script>
        // Test QR code generation
        const vCardData = `BEGIN:VCARD
VERSION:3.0
FN:Josephine Low
TITLE:Director
EMAIL:jo@sunflowerkid.com
TEL;TYPE=CELL:+65 9736 8663
TEL;TYPE=WORK:+65 6260 0231
ADR;TYPE=WORK:;;Blk 201E Tampines Street 23, #02-108 Singapore 527201;;;;
END:VCARD`;

        QRCode.toDataURL(vCardData, {
            width: 300,
            margin: 2,
            errorCorrectionLevel: 'M',
            color: {
                dark: '#000000',
                light: '#FFFFFF'
            }
        }).then(url => {
            console.log('QR generated successfully');
            
            // Display in div
            const img = document.createElement('img');
            img.src = url;
            document.getElementById('qrcode').appendChild(img);
            
            // Test canvas drawing
            const canvas = document.getElementById('testCanvas');
            const ctx = canvas.getContext('2d');
            
            const qrImg = new Image();
            qrImg.onload = () => {
                ctx.fillStyle = '#FFCC00';
                ctx.fillRect(0, 0, 400, 400);
                ctx.drawImage(qrImg, 50, 50, 200, 200);
            };
            qrImg.src = url;
            
        }).catch(error => {
            console.error('QR generation failed:', error);
        });
    </script>
</body>
</html>